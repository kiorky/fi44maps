<!DOCTYPE html>
<html>
  <head>
    <title>Élections 2017/4404</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="./leaflet.css" />
      <link rel="stylesheet" href="style.css"/>
      <link href='https://fonts.googleapis.com/css?family=Cabin' rel='stylesheet' type='text/css'>
      </head>
      <body>
        <div id="header">
          <h3 id="title2">Résultats par bureau de vote - la couleur affichée ne sert qu'à délimiter !</h3>
        </div>
        <a href="./by-candidate.html">Mode par candidat</a>
        <div id="map"></div>
        <div id="footer"> </div>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="./leaflet-0.7.2.js"></script>
        <!--   <script type="text/javascript" src="http://d3js.org/d3.v2.js"></script> -->
        <script type="text/javascript" src="Control.TouchHover.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/chroma-js/0.5.2/chroma.min.js"></script>
        <script type="text/javascript" src="common.js"></script>
        <script type="text/javascript" src="bureaux4.js"></script>
        <script type="text/javascript">
function getColor(candidat) { return colors[candidat]; }
function bureauxStyle(feature) {
  return {
    color: "lightgrey",
    weight: 1,
    opacity: 4,
    fillColor: "red",
    fillOpacity: 0.6
  };
}
$(document).ready(function() {
    launchmap();
    legend.update = function (bureau) {
      if (false || bureau) {
        var resultsList = '<ul>';
        for(var key in resultsd[bureau.ASSOCIANT]) {
          var value = resultsd[bureau.ASSOCIANT][key];
          resultsList += '<li><canvas id="myCanvas" width="';
          resultsList += value[Object.keys(value)]*2;
          resultsList += '" height="20" style="border:1px solid ' + colors[Object.keys(value)] + '; background-color:';
          resultsList += colors[Object.keys(value)];
          resultsList += '; opacity: 0.6;"></canvas> ';
          resultsList += fullNames[Object.keys(value)];
          if (partis[Object.keys(value)]) {
            resultsList += '<span class="parti"> (' + partis[Object.keys(value)] + ')</span>';
          }
          resultsList += ' : ';
          resultsList += Math.round(value[Object.keys(value)] * 100) / 100;
          resultsList += '%</li>';
        };
        resultsList += '<ul>';
        this._div.innerHTML = '<b>' + bureau.ASSOCIANT + '</b> (n°'+ bureau.ASSOCIANT.replace(/^0+/, '') + ')<br />' + resultsList;
      } else{
        var resultsList = '<ul>';
        for(var key in resultsg) {
          var value = resultsg[key];
          resultsList += '<li><canvas id="myCanvas" width="';
          resultsList += value[Object.keys(value)]*2;
          resultsList += '" height="20" style="border:1px solid ' + colors[Object.keys(value)] + '; background-color:';
          resultsList += colors[Object.keys(value)];
          resultsList += '; opacity: 0.6;"></canvas> ';
          resultsList += fullNames[Object.keys(value)];
          if (partis[Object.keys(value)]) {
            resultsList += '<span class="parti"> (' + partis[Object.keys(value)]  + ')</span>';
          }
          resultsList += ' : ';
          resultsList += Math.round(value[Object.keys(value)]*100)/100;
          resultsList += '%</li>';
        };
        resultsList += '<ul>';
        this._div.innerHTML = '<h3>Résultats 4404</h3>' + 'Survolez un bureau de vote pour plus de détails' + resultsList;
      };
    };
    legend.addTo(map);
  });
  </script>
</body>
</html>
